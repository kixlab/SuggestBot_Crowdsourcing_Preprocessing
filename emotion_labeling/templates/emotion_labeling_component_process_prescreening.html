{% extends 'base.html' %}

{% load staticfiles %}

{% block header %}
<link href="{%static 'css/emotion_labeling_task.css'%}" rel="stylesheet">
<form method="POST">
  {% csrf_token %}
<div id='vue_app' style="margin-left: 20px;">
  <div v-bind:class="{hidden_item:step!=0}" class="row" style="display:block; margin: auto;">
    <h3>Pass the test, and start the $X task</h3>
    <p>which takes about ~ min</p>
    <p>You will be given 2 test problems and if you pass them, you will be able to start a task of labeling the emotional aspects of a character while watching a video.</p>
    <h4>First, you will be tested whether you can understand our criteria.</h4>
    <p>1. In our task, you will be asked to decide expressions and the physiological traits of a character.</p>
    <p>Keep belows in your mind when labeling.</p>
    <p>(1) When labeling expressions, you need to focus on the objective evidence from the video.</p>
    <p>(2) You need to decide expressions of the character compared to expressions when the character is in emotionally neutral state.</p>
    <p>(3) If the video lacks information or you are not sure about the expression, select 'Not sure' option, and provide the reason why it lacks the information.</p>
    <br>
    <p>In the test, you will watch two short clips and decide expressional states of the character.</p>
    <p>These problems will be quite similar to what you are going to do in the main task.</p>
  </div>
  <div v-bind:class="{hidden_item:step!=1}">
    <p>Watch short clips and decide expressional states of a character in each clips according to criteria below.</p>
    <p>(1) When labeling expressions, you need to focus on the objective evidence from the video.</p>
    <p>(2) You need to decide expressions of the character compared to expressions when the character is in emotionally neutral state.</p>
    <p>(3) If the video lacks information or you are not sure about the expression, select 'Not sure' option, and provide the reason why it lacks the information.</p>
    <h5>1. Clip 1</h5>
    <video id="expression_video1" class="video-js" src="{%static 'example_video'%}/prescreening_0.mp4" type="video/mp4" style="height:270px; width:480px" controls>
    </video>
    <p>The character's mouth is...</p>
    <div>
      <span>Opened</span>
      <input name='expression1' type='radio' value='1' id="expression_1">
      <label for='expression_1'></label>
      <input name='expression1' type='radio' value='2' id="expression_2">
      <label for='expression_2'></label>
      <input name='expression1' type='radio' value='3' id="expression_3">
      <label for='expression_3'></label>
      <input name='expression1' type='radio' value='4' id="expression_4">
      <label for='expression_4'></label>
      <input name='expression1' type='radio' value='5' id="expression_5">
      <label for='expression_5'></label>
      <span>Closed</span>
  </div>
  <div>
    <input name='expression1' type='radio' value='6' id="expression_6">
    <label for='expression_6'>Not sure / Lack information</label>
    <input type='text' id='reason' style="width: 100px; height: 25px; margin-bottom: 5px; border: 0.5px solid #9e9e9e; border-radius: 0;" placeholder=" Reason"></input>
  </div>
  <h5>2. Clip 2</h5>
  <video id="expression_video2" class="video-js" src="{%static 'example_video'%}/prescreening_1.mp4" type="video/mp4" style="height:270px; width:480px" controls>
  </video>
  <p>The woman is smiling.</p>
  <div>
    <span>Not at all</span>
    <input name='expression2' type='radio' value='1' id="expression2_1">
    <label for='expression2_1'></label>
    <input name='expression2' type='radio' value='2' id="expression2_2">
    <label for='expression2_2'></label>
    <input name='expression2' type='radio' value='3' id="expression2_3">
    <label for='expression2_3'></label>
    <input name='expression2' type='radio' value='4' id="expression2_4">
    <label for='expression2_4'></label>
    <input name='expression2' type='radio' value='5' id="expression2_5">
    <label for='expression2_5'></label>
    <span>Definitely</span>
</div>
<div>
  <input name='expression2' type='radio' value='6' id="expression2_6">
  <label for='expression2_6'>Not sure / Lack information</label>
  <input type='text' id='reason' style="width: 100px; height: 25px; margin-bottom: 5px; border: 0.5px solid #9e9e9e; border-radius: 0;" placeholder=" Reason"></input>
</div>
  </div>
  <div v-bind:class="{hidden_item:step!=2}">
    <p>2. In the task, you will also be asked to appraise the event that is related to emotional status of the character.</p>
    <p>In many cases, many events can happen simultaneously, and deciding and focusing on a single event might be difficult.</p>
    <p>If that is the case, apply following criteria and decide one event to focus on</p>
    <p>(1) Among all events, the event you need to focus on is dominantly affecting the character's emotion.</p>
    <p>(2) The event should be happening right now in the video. It can be related to the past, but should happening right now, like 'remembering past memory'.</p>
    <br>
    <p> In the test, you will watch a short clip and decide which event is the target event according to above criteria.</p>
    <p> In the task, you will appraise the event you decided in various aspects, like its positiveness or negativeness to the character.</p>
  </div>
  <div v-bind:class="{hidden_item:step!=3}">
    <p>The context of the video : The boy is waiting for his father who is the astronaut and currently in the space. One day he meets an alien and they are having conversation.</p>
    <video id="event_video" class="video-js" src="{%static 'example_video'%}/prescreening_2.mp4" type="video/mp4" style="height:270px; width:480px" controls>
    </video>
    <p>After watching the short clip, decide which event is the target event according to below criteria.</p>
    <p>(1) Among all events, the event you need to focus on is dominantly affecting the character's emotion, <b>the boy</b>, in this case.</p>
    <p>(2) The event should be happening right now in the video. It can be related to the past, but should happening right now.</p>

    <div>
      <input name='event' type='radio' value='1' id="event_1">
      <label for='event_1'>Remembering father</label>
      <input name='event' type='radio' value='2' id="event_2">
      <label for='event_2'>Father going into space</label>
      <input name='event' type='radio' value='3' id="event_3">
      <label for='event_3'>Disappearance of alien</label>
    </div>
  </div>
  <div v-if="step==4" style="margin-bottom: 10px;">
    <button id='submit' v-if="step==4" type='submit' class='btn'>To the main task</button>
  </div>
  <div>
    <span v-if="step!=0" v-on:click="prev_step()" class='btn'>Prev</span> <span v-if="step!=3" v-bind:class="{hidden_item:step==4}" v-on:click="next_step()" class='btn'>Next</span> <span v-if="step==3" v-on:click="enable_task()" class='btn'>Next</span>
  </div>
</div>
<script>
  var vue_app = new Vue({
    el: "#vue_app",
    delimiters: ['[[', ']]'],
    data:{
      step: 0,
      prob_1: -1,
      prob_2: -1,
    },
    methods:{
      enable_task: function(){
        if($("input[name='event']:checked").val()==undefined){
          alert("Please select your answer!")
          return;
        }else if($("input[name='event']:checked").val()!="1"){
          alert("You got wrong on this problem. Think again and decide.")
          return
        }else{
          this.step++;
          $("video").each(function () { this.pause() });
        }
      },
      next_step: function(){
        if(this.step==1){
          if($("input[name='expression1']:checked").val()==undefined || $("input[name='expression2']:checked").val()==undefined){
            alert("Please select your answer!")
            return;
          }else if($("input[name='expression1']:checked").val()!="6" || $("input[name='expression2']:checked").val()!="6"){
            alert("You got wrong on this problem. Think again and decide.")
            return;
          }
        }
        this.step++;
        $("video").each(function () { this.pause() });
      },
      prev_step: function(){
        this.step--;
        $("video").each(function () { this.pause() });
      },
    }
  })
$("input[name='event']").on('click', function(){
  $("#submit").removeClass('disabled')
})

</script>
{% endblock %}
